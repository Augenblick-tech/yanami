(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[615],{8170:function(e,t,r){Promise.resolve().then(r.bind(r,8225))},5624:function(e,t,r){"use strict";r.d(t,{U4:function(){return l},id:function(){return a},qx:function(){return s}});var n=r(7126);let a=async()=>(await n.h.get("/rules")).data,s=async e=>(await n.h.post("/rule",e)).data,l=async e=>(await n.h.delete("/rule?name=".concat(e))).data},8225:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return ed}});var n=r(881),a=r(4149),s=r(5565),l=r.n(s),i=r(4920),o=r(116),d=r(270);let c=(0,o.j)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function m(e){let{className:t,variant:r,...a}=e;return(0,n.jsx)("div",{className:(0,d.cn)(c({variant:r}),t),...a})}var u=r(190);let f=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(u.fC,{className:(0,d.cn)("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",r),...a,ref:t,children:(0,n.jsx)(u.bU,{className:(0,d.cn)("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})})});f.displayName=u.fC.displayName;var x=r(7597),h=r(8580),p=r(3335),j=r(9077),g=r(7126);let b=async()=>(await g.h.get("/animes")).data,N=async e=>(await g.h.get("/anime/search/".concat(e))).data,v=async e=>(await g.h.get("/anime/records?name_id=".concat(e))).data,y=async e=>(await g.h.post("/anime",e)).data;var w=r(8766);function _(){return(0,n.jsxs)(i.Zb,{className:"h-96",children:[(0,n.jsx)(i.Ol,{children:(0,n.jsx)(w.O,{className:"h-6 w-3/4"})}),(0,n.jsxs)(i.aY,{className:"space-y-2",children:[(0,n.jsx)(w.O,{className:"h-4 w-full"}),(0,n.jsx)(w.O,{className:"h-4 w-full"}),(0,n.jsx)(w.O,{className:"h-4 w-3/4"}),(0,n.jsx)(w.O,{className:"h-4 w-1/2"})]})]})}var k=r(4491),C=r(5935);let I=k.fC,z=k.xz,R=k.h_;k.x8;let Y=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(k.aV,{ref:t,className:(0,d.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...a})});Y.displayName=k.aV.displayName;let S=a.forwardRef((e,t)=>{let{className:r,children:a,...s}=e;return(0,n.jsxs)(R,{children:[(0,n.jsx)(Y,{}),(0,n.jsxs)(k.VY,{ref:t,className:(0,d.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...s,children:[a,(0,n.jsxs)(k.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,n.jsx)(C.Pxu,{className:"h-4 w-4"}),(0,n.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});S.displayName=k.VY.displayName;let O=e=>{let{className:t,...r}=e;return(0,n.jsx)("div",{className:(0,d.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...r})};O.displayName="DialogHeader";let T=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(k.Dx,{ref:t,className:(0,d.cn)("text-lg font-semibold leading-none tracking-tight",r),...a})});T.displayName=k.Dx.displayName;let G=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(k.dk,{ref:t,className:(0,d.cn)("text-sm text-muted-foreground",r),...a})});G.displayName=k.dk.displayName;var D=r(6749),E=r(5082),J=r(1184),F=r(2491);let P=F.z.object({id:F.z.number(),name:F.z.string().min(1,"名称不能为空"),name_cn:F.z.string(),name_tw:F.z.string(),eps:F.z.number().min(0,"集数不能为负数"),season:F.z.number().min(1,"季度必须大于0"),weekday:F.z.number().min(0).max(6,"星期必须在0-6之间"),air_date:F.z.string().regex(/^\d{4}-\d{2}-\d{2}$/,"日期格式应为YYYY-MM-DD"),search_name:F.z.string(),alternative_titles:F.z.array(F.z.string()).optional()}),W=F.z.object({anime_info:P,rule_name:F.z.string().min(1,"规则名称不能为空"),status:F.z.boolean()});var X=r(2157),A=r(8741),Z=r(6942),M=r(3609),V=r(9140);let L=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(V.mY,{ref:t,className:(0,d.cn)("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",r),...a})});L.displayName=V.mY.displayName;let U=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsxs)("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[(0,n.jsx)(C._Ve,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),(0,n.jsx)(V.mY.Input,{ref:t,className:(0,d.cn)("flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",r),...a})]})});U.displayName=V.mY.Input.displayName;let B=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(V.mY.List,{ref:t,className:(0,d.cn)("max-h-[300px] overflow-y-auto overflow-x-hidden",r),...a})});B.displayName=V.mY.List.displayName;let H=a.forwardRef((e,t)=>(0,n.jsx)(V.mY.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));H.displayName=V.mY.Empty.displayName;let q=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(V.mY.Group,{ref:t,className:(0,d.cn)("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",r),...a})});q.displayName=V.mY.Group.displayName,a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(V.mY.Separator,{ref:t,className:(0,d.cn)("-mx-1 h-px bg-border",r),...a})}).displayName=V.mY.Separator.displayName;let K=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(V.mY.Item,{ref:t,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",r),...a})});K.displayName=V.mY.Item.displayName;var Q=r(7827);let $=Q.fC,ee=Q.xz;Q.ee;let et=a.forwardRef((e,t)=>{let{className:r,align:a="center",sideOffset:s=4,...l}=e;return(0,n.jsx)(Q.h_,{children:(0,n.jsx)(Q.VY,{ref:t,align:a,sideOffset:s,className:(0,d.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),...l})})});et.displayName=Q.VY.displayName;let er={anime_info:{id:0,name:"",name_cn:"",name_tw:"",eps:0,season:1,weekday:0,air_date:"",search_name:"",alternative_titles:[]},rule_name:"",status:!1},en=()=>{let[e,t]=(0,a.useState)(!1),{data:r}=(0,A.k)(),s=(0,D.cI)({resolver:(0,E.F)(W),defaultValues:er}),l=async e=>{await y(e),await (0,j.JG)("/animes"),x.Am.success("新动漫已添加",{description:"新的动漫已成功添加到列表中。"}),t(!1)};return(0,n.jsxs)(I,{open:e,onOpenChange:e=>{t(e),s.reset(er)},children:[(0,n.jsx)(z,{asChild:!0,children:(0,n.jsx)(h.z,{children:"新增动漫"})}),(0,n.jsxs)(S,{className:"sm:max-w-[625px] w-[95vw] max-h-[90vh] overflow-y-auto",children:[(0,n.jsxs)(O,{children:[(0,n.jsx)(T,{children:"新增动漫"}),(0,n.jsx)(G,{children:"添加新的动漫到列表中。"})]}),(0,n.jsx)(J.l0,{...s,children:(0,n.jsxs)("form",{onSubmit:s.handleSubmit(l),className:"space-y-4",children:[(0,n.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[(0,n.jsx)(J.Wi,{control:s.control,name:"anime_info.id",render:e=>{let{field:t}=e;return(0,n.jsxs)(J.xJ,{children:[(0,n.jsx)(J.lX,{children:"ID"}),(0,n.jsx)(J.NI,{children:(0,n.jsx)(p.I,{type:"number",...t,onChange:e=>t.onChange(parseInt(e.target.value))})}),(0,n.jsx)(J.zG,{})]})}}),(0,n.jsx)(J.Wi,{control:s.control,name:"anime_info.name",render:e=>{let{field:t}=e;return(0,n.jsxs)(J.xJ,{children:[(0,n.jsx)(J.lX,{children:"名称"}),(0,n.jsx)(J.NI,{children:(0,n.jsx)(p.I,{...t})}),(0,n.jsx)(J.zG,{})]})}}),(0,n.jsx)(J.Wi,{control:s.control,name:"anime_info.search_name",render:e=>{let{field:t}=e;return(0,n.jsxs)(J.xJ,{children:[(0,n.jsx)(J.lX,{children:"搜索名称"}),(0,n.jsx)(J.NI,{children:(0,n.jsx)(p.I,{...t})}),(0,n.jsx)(J.zG,{})]})}})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[(0,n.jsx)(J.Wi,{control:s.control,name:"anime_info.name_cn",render:e=>{let{field:t}=e;return(0,n.jsxs)(J.xJ,{children:[(0,n.jsx)(J.lX,{children:"中文名（简体）"}),(0,n.jsx)(J.NI,{children:(0,n.jsx)(p.I,{...t})}),(0,n.jsx)(J.zG,{})]})}}),(0,n.jsx)(J.Wi,{control:s.control,name:"anime_info.name_tw",render:e=>{let{field:t}=e;return(0,n.jsxs)(J.xJ,{children:[(0,n.jsx)(J.lX,{children:"中文名（繁体）"}),(0,n.jsx)(J.NI,{children:(0,n.jsx)(p.I,{...t})}),(0,n.jsx)(J.zG,{})]})}}),(0,n.jsx)(J.Wi,{control:s.control,name:"anime_info.alternative_titles",render:e=>{let{field:t}=e;return(0,n.jsxs)(J.xJ,{children:[(0,n.jsx)(J.lX,{children:"别名"}),(0,n.jsx)(J.NI,{children:(0,n.jsx)(ea,{value:t.value||[],onChange:t.onChange})}),(0,n.jsx)(J.zG,{})]})}})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[(0,n.jsx)(J.Wi,{control:s.control,name:"anime_info.eps",render:e=>{let{field:t}=e;return(0,n.jsxs)(J.xJ,{children:[(0,n.jsx)(J.lX,{children:"集数"}),(0,n.jsx)(J.NI,{children:(0,n.jsx)(p.I,{type:"number",...t,onChange:e=>t.onChange(parseInt(e.target.value))})}),(0,n.jsx)(J.zG,{})]})}}),(0,n.jsx)(J.Wi,{control:s.control,name:"anime_info.season",render:e=>{let{field:t}=e;return(0,n.jsxs)(J.xJ,{children:[(0,n.jsx)(J.lX,{children:"季度"}),(0,n.jsx)(J.NI,{children:(0,n.jsx)(p.I,{type:"number",...t,onChange:e=>t.onChange(parseInt(e.target.value))})}),(0,n.jsx)(J.zG,{})]})}}),(0,n.jsx)(J.Wi,{control:s.control,name:"anime_info.weekday",render:e=>{let{field:t}=e;return(0,n.jsxs)(J.xJ,{children:[(0,n.jsx)(J.lX,{children:"放送日"}),(0,n.jsx)(J.NI,{children:(0,n.jsx)(p.I,{type:"number",...t,onChange:e=>t.onChange(parseInt(e.target.value))})}),(0,n.jsx)(J.pf,{children:"0-6（周日-周六）"}),(0,n.jsx)(J.zG,{})]})}}),(0,n.jsx)(J.Wi,{control:s.control,name:"anime_info.air_date",render:e=>{let{field:t}=e;return(0,n.jsxs)(J.xJ,{children:[(0,n.jsx)(J.lX,{children:"首播日期"}),(0,n.jsx)(J.NI,{children:(0,n.jsx)(p.I,{...t,placeholder:"YYYY-MM-DD"})}),(0,n.jsx)(J.zG,{})]})}})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,n.jsx)(J.Wi,{control:s.control,name:"rule_name",render:e=>{var t;let{field:a}=e;return(0,n.jsxs)(J.xJ,{className:"flex flex-col",children:[(0,n.jsx)(J.lX,{children:"规则名称"}),(0,n.jsxs)($,{children:[(0,n.jsx)(ee,{asChild:!0,children:(0,n.jsx)(J.NI,{children:(0,n.jsxs)(h.z,{variant:"outline",role:"combobox",className:(0,d.cn)("w-full justify-between",!a.value&&"text-muted-foreground"),children:[a.value?null==r?void 0:null===(t=r.find(e=>e.name===a.value))||void 0===t?void 0:t.name:"选择规则",(0,n.jsx)(Z.Z,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})})}),(0,n.jsx)(et,{className:"w-[--radix-popover-trigger-width] p-0",children:(0,n.jsxs)(L,{children:[(0,n.jsx)(U,{placeholder:"搜索规则..."}),(0,n.jsx)(H,{children:"未找到规则。"}),(0,n.jsx)(q,{children:(0,n.jsx)(B,{children:null==r?void 0:r.map(e=>(0,n.jsxs)(K,{value:e.name,onSelect:()=>{s.setValue("rule_name",e.name)},children:[(0,n.jsx)(M.Z,{className:(0,d.cn)("mr-2 h-4 w-4",e.name===a.value?"opacity-100":"opacity-0")}),e.name]},e.name))})})]})})]}),(0,n.jsx)(J.zG,{})]})}}),(0,n.jsx)(J.Wi,{control:s.control,name:"status",render:e=>{let{field:t}=e;return(0,n.jsxs)(J.xJ,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[(0,n.jsxs)("div",{className:"space-y-0.5",children:[(0,n.jsx)(J.lX,{className:"text-base",children:"状态"}),(0,n.jsx)(J.pf,{children:"启用或禁用此动漫"})]}),(0,n.jsx)(J.NI,{children:(0,n.jsx)(f,{checked:t.value,onCheckedChange:t.onChange})})]})}})]}),(0,n.jsx)("div",{className:"flex justify-end pt-4",children:(0,n.jsx)(h.z,{type:"submit",children:"添加动漫"})})]})})]})]})},ea=e=>{let{value:t,onChange:r}=e,[s,l]=(0,a.useState)(""),i=e=>{r(t.filter((t,r)=>r!==e))};return(0,n.jsxs)("div",{children:[(0,n.jsx)(p.I,{value:s,onChange:e=>{l(e.target.value)},onKeyDown:e=>{"Enter"===e.key&&""!==s.trim()&&(e.preventDefault(),r([...t,s.trim()]),l(""))},placeholder:"输入别名并按回车添加"}),(0,n.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:t&&t.map((e,t)=>(0,n.jsxs)(m,{variant:"secondary",className:"flex items-center gap-1",children:[e,(0,n.jsx)("button",{type:"button",onClick:()=>i(t),className:"text-xs",children:(0,n.jsx)(X.Z,{size:12})})]},t))})]})};var es=r(2159),el=r(9399),ei=r(2053);function eo(e){let{animeId:t,open:r,onOpenChange:s}=e,[l,o]=(0,a.useState)(1),{data:d,error:c,isLoading:m}=(0,j.ZP)(t?"/anime/records?name_id=".concat(t):null,()=>v(t||0));if((0,a.useEffect)(()=>{m||d||!r||(x.Am.error("获取下载记录失败"),s())},[m,s,r,d]),m||!d&&!c)return null;let u=null==d?void 0:d.slice((l-1)*10,10*l),f=Math.ceil(((null==d?void 0:d.length)||0)/10);return(0,n.jsx)(I,{open:r,onOpenChange:s,children:(0,n.jsxs)(S,{className:"max-w-3xl",children:[(0,n.jsxs)(O,{children:[(0,n.jsx)(T,{children:"番剧下载记录"}),(0,n.jsxs)(G,{children:[null==d?void 0:d.length,"条下载记录"]})]}),c?(0,n.jsxs)("p",{className:"text-red-500",children:["获取下载记录失败: ",c.message]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"hidden md:block",children:(0,n.jsxs)(es.iA,{children:[(0,n.jsx)(es.xD,{children:(0,n.jsxs)(es.SC,{children:[(0,n.jsx)(es.ss,{className:"whitespace-nowrap",children:"标题"}),(0,n.jsx)(es.ss,{className:"whitespace-nowrap",children:"规则名称"}),(0,n.jsx)(es.ss,{className:"whitespace-nowrap",children:"磁力链接"}),(0,n.jsx)(es.ss,{className:"whitespace-nowrap",children:"信息哈希"})]})}),(0,n.jsx)(es.RM,{children:null==d?void 0:d.map((e,t)=>(0,n.jsxs)(es.SC,{children:[(0,n.jsx)(es.pj,{children:e.title}),(0,n.jsx)(es.pj,{children:e.rule_name}),(0,n.jsx)(es.pj,{children:(0,n.jsx)("a",{href:e.magnet,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"磁力链接"})}),(0,n.jsx)(es.pj,{children:e.info_hash})]},t))})]})}),(0,n.jsx)("div",{className:"md:hidden space-y-4",children:null==u?void 0:u.map((e,t)=>(0,n.jsxs)(i.Zb,{children:[(0,n.jsx)(i.Ol,{children:(0,n.jsx)(i.ll,{className:"text-sm",children:e.title})}),(0,n.jsxs)(i.aY,{children:[(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"规则名称："}),e.rule_name]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"磁力链接："}),(0,n.jsx)("a",{href:e.magnet,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"点击打开"})]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"信息哈希："}),e.info_hash]})]})]},t))}),(0,n.jsxs)("div",{className:"flex justify-between items-center mt-4",children:[(0,n.jsxs)(h.z,{onClick:()=>o(e=>Math.max(1,e-1)),disabled:1===l,children:[(0,n.jsx)(el.Z,{className:"h-4 w-4 mr-2"}),"上一页"]}),(0,n.jsxs)("span",{children:[l," / ",f]}),(0,n.jsxs)(h.z,{onClick:()=>o(e=>Math.min(f,e+1)),disabled:l===f,children:["下一页",(0,n.jsx)(ei.Z,{className:"h-4 w-4 ml-2"})]})]})]})]})})}function ed(){let[e,t]=(0,a.useState)(""),[r,s]=(0,a.useState)(""),{data:o,isLoading:d,mutate:c}=(0,j.ZP)(r?["/animes",r]:"/animes",r?()=>N(r):b),[u,g]=(0,a.useState)(null),[v,w]=(0,a.useState)(null),k=(0,a.useMemo)(()=>l()(e=>s(e),300),[]),C=async(e,t,r)=>{g(e);try{await y({...r,status:t}),await c(),x.Am.success("状态已更新",{description:"动漫状态已成功更新。"})}catch(e){x.Am.error("更新失败",{description:"无法更新动漫状态，请稍后重试。"})}finally{g(null)}},I=e=>["周日","周一","周二","周三","周四","周五","周六"][e]||"未知",[z,R]=(0,a.useState)(null),Y=e=>{R(z===e?null:e)};return(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold",children:"动漫列表"}),(0,n.jsx)(en,{})]}),(0,n.jsx)(p.I,{type:"text",placeholder:"搜索动漫...",value:e,onChange:e=>{let r=e.target.value;t(r),k(r)},className:"max-w-sm"}),(0,n.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:d?Array(6).fill(0).map((e,t)=>(0,n.jsx)(_,{},t)):null==o?void 0:o.map(e=>(0,n.jsxs)(i.Zb,{children:[(0,n.jsx)(i.Ol,{children:(0,n.jsxs)(i.ll,{className:"flex justify-between items-center",children:[(0,n.jsx)("span",{children:e.anime_info.name}),(0,n.jsx)(f,{checked:e.status,onCheckedChange:t=>C(e.anime_info.id,t,e),disabled:u===e.anime_info.id})]})}),(0,n.jsxs)(i.aY,{children:[(0,n.jsxs)("p",{children:["中文名: ",e.anime_info.name_cn||e.anime_info.name_tw]}),(0,n.jsxs)("p",{children:["集数: ",e.anime_info.eps]}),(0,n.jsxs)("p",{children:["季度: ",e.anime_info.season]}),(0,n.jsxs)("p",{children:["放送日: ",I(e.anime_info.weekday)]}),(0,n.jsxs)("p",{children:["首播日期: ",e.anime_info.air_date]}),(0,n.jsxs)("p",{children:["规则: ",e.rule_name]}),(0,n.jsxs)("div",{className:"mt-2",children:[(0,n.jsx)("p",{className:"mb-1",children:"别名:"}),e.anime_info.alternative_titles&&e.anime_info.alternative_titles.length>0?(0,n.jsxs)(n.Fragment,{children:[(z===e.anime_info.id?e.anime_info.alternative_titles:e.anime_info.alternative_titles.slice(0,3)).map((e,t)=>(0,n.jsx)(m,{variant:"secondary",className:"mr-1 mb-1",children:e},t)),e.anime_info.alternative_titles.length>3&&(0,n.jsx)(h.z,{variant:"link",size:"sm",onClick:()=>Y(e.anime_info.id),className:"mt-2 text-xs font-semibold text-blue-600 hover:text-blue-800 transition-colors duration-200",children:z===e.anime_info.id?"收起":"展开 (".concat(e.anime_info.alternative_titles.length-3,")")})]}):(0,n.jsx)("span",{className:"text-gray-500",children:"无别名"})]}),(0,n.jsx)(h.z,{variant:"outline",size:"sm",onClick:()=>w(e.anime_info.id),className:"mt-2",children:"查看下载记录"})]})]},e.anime_info.id))}),(0,n.jsx)(eo,{animeId:v,open:!!v,onOpenChange:()=>w(null)})]})}},8580:function(e,t,r){"use strict";r.d(t,{z:function(){return d}});var n=r(881),a=r(4149),s=r(4098),l=r(116),i=r(270);let o=(0,l.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,t)=>{let{className:r,variant:a,size:l,asChild:d=!1,...c}=e,m=d?s.g7:"button";return(0,n.jsx)(m,{className:(0,i.cn)(o({variant:a,size:l,className:r})),ref:t,...c})});d.displayName="Button"},4920:function(e,t,r){"use strict";r.d(t,{Ol:function(){return i},SZ:function(){return d},Zb:function(){return l},aY:function(){return c},ll:function(){return o}});var n=r(881),a=r(4149),s=r(270);let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("rounded-xl border bg-card text-card-foreground shadow",r),...a})});l.displayName="Card";let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",r),...a})});i.displayName="CardHeader";let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("h3",{ref:t,className:(0,s.cn)("font-semibold leading-none tracking-tight",r),...a})});o.displayName="CardTitle";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("p",{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",r),...a})});d.displayName="CardDescription";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("p-6 pt-0",r),...a})});c.displayName="CardContent",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center p-6 pt-0",r),...a})}).displayName="CardFooter"},1184:function(e,t,r){"use strict";r.d(t,{l0:function(){return m},NI:function(){return g},pf:function(){return b},Wi:function(){return f},xJ:function(){return p},lX:function(){return j},zG:function(){return N}});var n=r(881),a=r(4149),s=r(4098),l=r(6749),i=r(270),o=r(1212);let d=(0,r(116).j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(o.f,{ref:t,className:(0,i.cn)(d(),r),...a})});c.displayName=o.f.displayName;let m=l.RV,u=a.createContext({}),f=e=>{let{...t}=e;return(0,n.jsx)(u.Provider,{value:{name:t.name},children:(0,n.jsx)(l.Qr,{...t})})},x=()=>{let e=a.useContext(u),t=a.useContext(h),{getFieldState:r,formState:n}=(0,l.Gc)(),s=r(e.name,n);if(!e)throw Error("useFormField should be used within <FormField>");let{id:i}=t;return{id:i,name:e.name,formItemId:"".concat(i,"-form-item"),formDescriptionId:"".concat(i,"-form-item-description"),formMessageId:"".concat(i,"-form-item-message"),...s}},h=a.createContext({}),p=a.forwardRef((e,t)=>{let{className:r,...s}=e,l=a.useId();return(0,n.jsx)(h.Provider,{value:{id:l},children:(0,n.jsx)("div",{ref:t,className:(0,i.cn)("space-y-2",r),...s})})});p.displayName="FormItem";let j=a.forwardRef((e,t)=>{let{className:r,...a}=e,{error:s,formItemId:l}=x();return(0,n.jsx)(c,{ref:t,className:(0,i.cn)(s&&"text-destructive",r),htmlFor:l,...a})});j.displayName="FormLabel";let g=a.forwardRef((e,t)=>{let{...r}=e,{error:a,formItemId:l,formDescriptionId:i,formMessageId:o}=x();return(0,n.jsx)(s.g7,{ref:t,id:l,"aria-describedby":a?"".concat(i," ").concat(o):"".concat(i),"aria-invalid":!!a,...r})});g.displayName="FormControl";let b=a.forwardRef((e,t)=>{let{className:r,...a}=e,{formDescriptionId:s}=x();return(0,n.jsx)("p",{ref:t,id:s,className:(0,i.cn)("text-[0.8rem] text-muted-foreground",r),...a})});b.displayName="FormDescription";let N=a.forwardRef((e,t)=>{let{className:r,children:a,...s}=e,{error:l,formMessageId:o}=x(),d=l?String(null==l?void 0:l.message):a;return d?(0,n.jsx)("p",{ref:t,id:o,className:(0,i.cn)("text-[0.8rem] font-medium text-destructive",r),...s,children:d}):null});N.displayName="FormMessage"},3335:function(e,t,r){"use strict";r.d(t,{I:function(){return l}});var n=r(881),a=r(4149),s=r(270);let l=a.forwardRef((e,t)=>{let{className:r,type:a,...l}=e;return(0,n.jsx)("input",{type:a,className:(0,s.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...l})});l.displayName="Input"},8766:function(e,t,r){"use strict";r.d(t,{O:function(){return s}});var n=r(881),a=r(270);function s(e){let{className:t,...r}=e;return(0,n.jsx)("div",{className:(0,a.cn)("animate-pulse rounded-md bg-primary/10",t),...r})}},2159:function(e,t,r){"use strict";r.d(t,{RM:function(){return o},SC:function(){return d},iA:function(){return l},pj:function(){return m},ss:function(){return c},xD:function(){return i}});var n=r(881),a=r(4149),s=r(270);let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{className:"relative w-full overflow-auto",children:(0,n.jsx)("table",{ref:t,className:(0,s.cn)("w-full caption-bottom text-sm",r),...a})})});l.displayName="Table";let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("thead",{ref:t,className:(0,s.cn)("[&_tr]:border-b",r),...a})});i.displayName="TableHeader";let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("tbody",{ref:t,className:(0,s.cn)("[&_tr:last-child]:border-0",r),...a})});o.displayName="TableBody",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("tfoot",{ref:t,className:(0,s.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...a})}).displayName="TableFooter";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("tr",{ref:t,className:(0,s.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...a})});d.displayName="TableRow";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("th",{ref:t,className:(0,s.cn)("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",r),...a})});c.displayName="TableHead";let m=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("td",{ref:t,className:(0,s.cn)("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",r),...a})});m.displayName="TableCell",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("caption",{ref:t,className:(0,s.cn)("mt-4 text-sm text-muted-foreground",r),...a})}).displayName="TableCaption"},8741:function(e,t,r){"use strict";r.d(t,{k:function(){return s}});var n=r(5624),a=r(9077);let s=()=>(0,a.ZP)("/rules",n.id)},7126:function(e,t,r){"use strict";r.d(t,{h:function(){return a}});var n=r(7597);let a=function(e){let{baseUrl:t}=e,r=[],n=[],a=async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s="".concat(t).concat(e),l={...a};for(let e of r)l=e(l);let i=await fetch(s,l);for(let e of n){let t=await e(i);if("code"in t)return t;i=t}if(!i.ok)throw Error("HTTP error! status: ".concat(i.status));let o=await i.json();if(0!==o.code&&200!==o.code)throw Error("API error! code: ".concat(o.code,", message: ").concat(o.msg));return o};return{request:a,get:(e,t)=>a(e,{...t,method:"GET"}),post:(e,t,r)=>a(e,{...r,method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",...null==r?void 0:r.headers}}),delete:(e,t)=>a(e,{...t,method:"DELETE"}),put:(e,t,r)=>a(e,{...r,method:"PUT",body:JSON.stringify(t),headers:{"Content-Type":"application/json",...null==r?void 0:r.headers}}),addRequestInterceptor:e=>{r.push(e)},addResponseInterceptor:e=>{n.push(e)}}}({baseUrl:r(8544).env.NEXT_PUBLIC_API_BASE_URL||"/v1"});a.addRequestInterceptor(e=>{let t=localStorage.getItem("token");return t?{...e,headers:{...e.headers,Authorization:"Bearer ".concat(t)}}:e}),a.addResponseInterceptor(async e=>{if(401===e.status)return e;let t=await e.clone().json();return 0!==t.code&&200!==t.code?(n.Am.error(t.msg),Promise.reject(t.msg)):e})},270:function(e,t,r){"use strict";r.d(t,{cn:function(){return s}});var n=r(3958),a=r(4399);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.m6)((0,n.W)(t))}}},function(e){e.O(0,[792,597,718,452,77,773,985,330,744],function(){return e(e.s=8170)}),_N_E=e.O()}]);